<div class="dashboard-container">
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" (click)="toggleSidebar()" *ngIf="isMobile">
    <fa-icon [icon]="faBars" class="menu-icon"></fa-icon>
  </button>

  <!-- Backdrop for mobile -->
  <div 
    class="sidebar-backdrop" 
    [class.active]="isMobile && !isCollapsed"
    (click)="closeSidebar()"
    *ngIf="isMobile">
  </div>

  <!-- Main Layout -->
  <div class="dashboard-layout">
    <!-- Sidebar -->
    <aside 
      class="sidebar"
      [class.collapsed]="isCollapsed"
      [class.mobile-open]="isMobile && !isCollapsed"
      (click)="onSidebarClick($event)">
      
      <div class="sidebar-content">
        <!-- Logo/Collapse Button Section -->
        <div class="sidebar-header">
          <div class="header-main">
            <!-- Logo and Brand -->
            <div class="brand-section" *ngIf="!isCollapsed">
              <div class="logo">
                <div class="logo-icon">ðŸ’Š</div>
              </div>
              <div class="brand-text">
                <span class="brand-name">CMED</span>
                <span class="brand-subtitle">Health</span>
              </div>
            </div>

            <!-- Toggle Button -->
            <button
              class="sidebar-toggle"
              (click)="toggleSidebar()"
              [attr.aria-label]="isCollapsed ? 'Expand sidebar' : 'Collapse sidebar'">
              <fa-icon 
                [icon]="isMobile && !isCollapsed ? faTimes : (isCollapsed ? faChevronRight : faChevronLeft)" 
                class="toggle-icon">
              </fa-icon>
            </button>
          </div>
        </div>

        <!-- Navigation Links -->
        <nav class="sidebar-nav">
          <ul class="nav-list">
            <li class="nav-item" *ngFor="let item of navItems">
              <a
                class="nav-link"
                [routerLink]="item.href"
                routerLinkActive="active"
                [class.active]="isActiveRoute(item.href)"
                [title]="isCollapsed ? item.name : ''"
                (click)="closeSidebar()">
                <div class="nav-icon">
                  <fa-icon [icon]="getIcon(item.icon)"></fa-icon>
                </div>
                <span class="nav-text" *ngIf="!isCollapsed">{{ item.name }}</span>
              </a>
            </li>
            
           
          </ul>
        </nav>

        <!-- User Profile Section -->
        <div class="user-section">
          <div class="user-profile">
            <div class="user-avatar">
              <fa-icon [icon]="faUser" class="user-icon"></fa-icon>
            </div>
            <div class="user-info" *ngIf="!isCollapsed">
              <p class="username">{{ currentUser?.username || 'User' }}</p>
              <p class="user-role">{{ currentUser?.role || 'Doctor' }}</p>
            </div>
          </div>
          
          <!-- Logout Button -->
          <button class="logout-btn" (click)="logout()" *ngIf="!isCollapsed">
            <fa-icon [icon]="faSignOutAlt" class="logout-icon"></fa-icon>
            Logout
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content" [class.sidebar-collapsed]="isCollapsed && !isMobile">
      <!-- Content Header -->
      <div class="content-header">
        <div class="header-content">
          <h1 class="page-title">{{ getPageTitle() }}</h1>
          <p class="page-subtitle">{{ getPageSubtitle() }}</p>
        </div>
      </div>
      
      <!-- Router Outlet for Content -->
      <div class="content-body">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>